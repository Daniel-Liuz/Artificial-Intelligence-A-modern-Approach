# 总览
# 7.1 基于知识的智能体

## 什么是基于知识的智能体？

想象你有个机器人助手，它不仅会干活，还会“思考”。它有个“知识库”（Knowledge Base，简称KB），就像它的大脑，里面装满了关于世界的“事实”。这些事实用一种特殊的语言写成，叫**知识表示语言**，有点像给机器看的“说明书”。智能体会根据这些知识推理，决定下一步做什么。
- **例子**：你告诉机器人“厨房有脏盘子”，它记下来（加到知识库），然后推理“脏盘子得洗”，就去洗碗了。
    
- **理解**：它像个会读书的助手，你教它东西，它就学会怎么干活。
    
## 知识库怎么工作？

知识库里的事实叫**语句**（Sentence），有些是直接给的（叫**公理**，比如“太阳从东边升起”），有些是通过推理得出的。智能体有两个基本操作：

- **Tell（告知）**：把新信息塞进知识库，比如“我看到微风”。
- **Ask（询问）**：问知识库该做什么，比如“现在安全吗？”。
- **推理（Inference）**：从已有信息推出新结论，比如“微风说明附近有坑”。
推理有个规矩：不能瞎编，只能基于已知事实推导。比如你不能凭空说“天上有龙”，得有证据。
- **例子**：你告诉智能体“下雨天路会湿”，它看到下雨，就推断“路湿了，得慢点走”。
- **理解**：Tell是“教”，Ask是“问”，推理是“想”，三步让智能体变聪明。
    

## 智能体的程序
![[7-1 基于知识的智能体.png]]
书里给了一个通用程序，描述智能体怎么用知识库干活：这个程序像个循环的“工作流程”，每次智能体收到一个感知（percept，比如“闻到臭味”），就返回一个动作（action，比如“向前走”）。它有几个关键部分：

1. **知识库（KB）和时间（t）**：
    - KB是智能体的大脑，里面存着所有知识，初始可能有“背景知识”（比如“臭味说明有怪兽”）。
        
    - t是时间计数器，从0开始，记录智能体活了多久。
        
    - **例子**：就像你记日记，第一页是“妈妈教我的常识”，后面是每天的见闻。
        
2. **三步操作**：
    
    - **第一步：Tell(KB, Make-Percept-Sentence(percept, t))**  
        把感知记进知识库。`Make-Percept-Sentence`把感知变成语句，比如“时间0，我闻到臭味”。
        
        - **例子**：你告诉导航“现在堵车”，它记下来“时间10:00，路况=堵”。
            
    - **第二步：action ← Ask(KB, Make-Action-Query(t))**  
        问知识库“现在该干啥？”。`Make-Action-Query`生成问题“时间0，我该做什么？”。知识库推理后回答，比如“向前走”。
        
        - **例子**：导航根据“堵车”推理“换条路”，告诉你“右转”。
            
    - **第三步：Tell(KB, Make-Action-Sentence(action, t))**  
        告诉知识库“我选了这个动作”，比如“时间0，我决定向前走”。
        
        - **例子**：导航记下“你右转了”，方便下次用。
            
3. **时间更新和返回**：
    
    - `t ← t + 1`：时间加1，进入下一轮。
        
    - `return action`：把动作交给智能体执行。
        
    - **例子**：导航说“右转”，车就转了，然后准备下个指令。
        

##### 生活化例子

想象你在玩“寻宝游戏”：

- 你闻到臭味（感知），告诉助手“时间0，有臭味”（Tell）。
    
- 助手查知识库“臭味=怪兽附近”，问“现在怎么办？”（Ask），回答“小心走”。
    
- 助手记下“时间0，我选了小心走”（Tell），你照做，时间变成1。
    
- **理解**：像个贴心秘书，看见啥记啥，问完告诉你干啥，还记下你干了啥。

## 知识层面 vs. 实现层面

智能体的“聪明”分两层：

- **知识层面**：我们只关心它知道什么、目标是什么。比如无人出租车知道“金门大桥是去马林县的路”，目标是“送乘客过去”，它就会走大桥。
    
- **实现层面**：它怎么算出来的（用代码、神经网络还是别的），我们不管。
    
- **例子**：你告诉导航“去超市”，它知道超市在哪，给你指路。你不用管它是用地图还是卫星算的。
    
- **理解**：知识层面是“脑子想什么”，实现层面是“手怎么干”，我们先学“想”。
    
## 陈述性 vs. 过程性

设计智能体有两种方法：
- **陈述性（Declarative）**：教它知识，让它自己推理。比如“告诉它规则，它自己决定”。
    
- **过程性（Procedural）**：直接写代码告诉它怎么做，比如“看到灰尘就吸”。
    
现在流行两结合：先教知识，再优化成快捷代码。

- **例子**：你教孩子“下雨带伞”（陈述性），他学会后自动拿伞（过程性）。
    
- **理解**：陈述性是“教鱼游泳”，过程性是“推鱼下水”。
    
## 为什么比问题求解智能体强？
第3、4章的问题求解智能体（像寻路或8数码）很有限：
- 只知道具体动作和结果，比如“走这步到那”。
    
- 用的是**原子表示**，列出所有可能状态，太笨拙。比如找小镇，它得列1.6万个选项。
    
- 第6章的**因子化表示**（变量赋值）进步了，但还不够灵活。
    

基于知识的智能体用**逻辑**，能表示复杂事实、推理新结论，还能学新东西、适应变化。

- **例子**：寻路智能体不知道“路不会是负数”，但基于知识的智能体能推理“路长得正，走吧”。
    
- **初学者理解**：问题求解智能体像只会背书的笨学生，基于知识的智能体像会举一反三的学霸。
    
**小结**：基于知识的智能体有个知识库，能学、能想、能干活，比死板的智能体聪明多了。

---

# 7.2 Wumpus世界

## 什么是Wumpus世界？
![[7-2 一个典型的wumpus世界.png]]
Wumpus世界是个简单又刺激的“游戏”，用来展示基于知识的智能体怎么用逻辑解决问题。想象一个4x4的地下迷宫，里面有：
- **Wumpus**：吃人的怪兽。
    
- **PIT**：无底洞。
    
- **Gold**：金块（目标）。
    
- **智能体**：你控制的小探险家，从[1,1]开始。
    

智能体得找到金块、活着出来，还要小心怪兽和坑。

#### PEAS描述

用第2章的PEAS框架定义任务环境：

- **P（性能度量）**：
    
    - 拿到金块爬出去：+1000分。
        
    - 掉坑或被吃：-1000分。
        
    - 每走一步：-1分。
        
    - 用箭：-10分。
        
- **E（环境）**：
    
    - 4x4网格，[1,1]是起点。
        
    - 金块和Wumpus随机放（不在[1,1]），每个格子20%概率有坑。
        
- **A（执行器）**：
    
    - 向前（Forward）、左转（TurnLeft）、右转（TurnRight）。
        
    - 抓金块（Grab）、射箭（Shoot，杀Wumpus）、爬出去（Climb，从[1,1]）。
        
- **S（传感器）**：
    
    - **Stench（臭味）**：Wumpus旁。
        
    - **Breeze（微风）**：坑旁。
        
    - **Glitter（闪光）**：金块处。
        
    - **Bump（碰撞）**：撞墙。
        
    - **Scream（惨叫）**：Wumpus被杀时全地图听到。
        
- **例子**：你在[1,2]闻到臭味（Stench），说明附近有Wumpus，得小心。
    
- **初学者理解**：像个探险游戏，智能体靠“嗅觉”“听觉”找宝藏，避危险。
    

#### 环境的性质

用第2章的维度看：

- **确定性**：规则固定，走哪后果清楚。
    
- **离散**：格子有限，动作有限。
    
- **静态**：Wumpus不跑，环境不变。
    
- **单智能体**：只有你，没队友。
    
- **序贯**：每步影响下步，得计划。
    
- **部分可观测**：你看不到Wumpus和坑在哪，得猜。
    
- **例子**：你不知道[2,2]有没有坑，但能通过微风推理。
    
- **理解**：像玩“扫雷”，得靠线索破关。
    
#### 智能体怎么玩？（图7-2到7-4）
![[7-2 一个典型的wumpus世界.png]]
我们用图片里的例子，看智能体怎么一步步推理：
1. **初始状态（图7-2，图7-3a）**：
    - 智能体在[1,1]，感知[None, None, None, None, None]。
    - 知识库知道：[1,1]安全（OK），没臭味没微风，[1,2]和[2,1]也安全（OK）。
    - **行动**：走[2,1]（谨慎选安全格）。
2. **第一步（图7-3b）**：
    ![[7-3 智能体在wumpus世界迈出的第一步.png]]
    - 在[2,1]感知[None, Breeze, None, None, None]。
        
    - 推理：微风说明附近有坑，[1,1]没坑，所以[2,2]或[3,1]有坑（P！）。
        
    - **行动**：回[1,1]，去[1,2]（只走OK格）。
        
3. **第二步（图7-4a）**：
    ![[7-4 智能体运作时的两个后续状态 .png]]
    - 在[1,2]感知[Stench, None, None, None, None]。
    - 推理：
        - 臭味说明附近有Wumpus。
        - [1,1]没Wumpus，[2,1]没臭味（所以[2,2]没Wumpus），Wumpus在[1,3]（W!）。
        - [1,2]没微风，[2,2]没坑，坑在[3,1]。
    - **行动**：去[2,2]（安全）。
4. **第三步（图7-4b）**：
	![[7-4 智能体运作时的两个后续状态 .png]]
    - 在[2,3]感知[Stench, Breeze, Glitter, None, None]。
    - 推理：闪光=金块，臭味和微风确认Wumpus在[1,3]，坑在附近。
    - **行动**：抓金块（Grab），回家。

## 逻辑推理的好处
每次推理都保证：如果信息对，结论就对。比如[1,2]有臭味，Wumpus一定在附近，这是铁律。
- **例子**：你闻到煤气味，推理“得关阀门”，逻辑救命。
- **理解**：逻辑像数学，1+1=2，不会错。

# 7.3 逻辑
## 7.3.1什么是逻辑？

逻辑是让智能体“动脑子”的工具。它像个侦探，能从已知线索推导出新结论。逻辑有两个核心部分：
- **语法（Syntax）**：语句怎么写才合法，像造句规则。比如“2+2=4”是正确的，“2+4=狗”就不行。
- **语义（Semantics）**：语句的意思是什么，什么时候为真。比如“2+2=4”在数学世界里是真的。
- **理解**：语法是“怎么说”，语义是“说什么”，逻辑帮智能体把“说”变成“做”。
## 7.3.2 可能世界和模型

逻辑里有个概念叫“可能世界”，就是所有可能的场景。但为了精确，我们用“模型”代替——模型是个数学工具，给每个语句定个真假值（True或False）。
- **例子**：算术题“x+y=4”。一个模型是“x=2, y=2”，这里语句为真；另一个模型是“x=1, y=1”，这里为假。
###  Wumpus世界的模型（枚举法）
在Wumpus世界中，模型是对环境中无底洞分布的一种假设。图7-5关注三个格子：[1,2]、[2,2]和[3,1]，每个格子可以是“有坑（P）”或“没坑（¬P）”，因此总共有 $2^3=8$种可能的组合，也就是8个模型。这8个模型可以用8张小图表示，每张图展示一种无底洞的分布情况：
![[7-5.png]]
(a)的情况是表示，假定[1,2]是没坑的，那么一共有4种可能的分布情况，用虚线表示，可以发现是把 KB 全包含了。
- **感知信息**：
    - **¬B₁,₁**：[1,1]没有微风，说明相邻的[1,2]和[2,1]没有坑（¬P₁,₂ ∧ ¬P₂,₁）。
    - **B₂,₁**：[2,1]有微风，说明相邻的[1,1]、[2,2]、[3,1]中至少有一个坑（P₁,₁ ∨ P₂,₂ ∨ P₃,₁）。
- **规则**：
    - B₁,₁ ⇔ (P₁,₂ ∨ P₂,₁)
    - B₂,₁ ⇔ (P₁,₁ ∨ P₂,₂ ∨ P₃,₁)
- **额外事实**：P₁,₁ = False（[1,1]是起点，无坑）。
结合感知和规则，KB筛选出符合条件的模型：
- ¬B₁,₁ ⇒ ¬P₁,₂ ∧ ¬P₂,₁（[1,2]和[2,1]无坑）。
- B₂,₁ ∧ ¬P₁,₁ ⇒ P₂,₂ ∨ P₃,₁（[2,2]或[3,1]至少有一个坑）。
在8个模型中，只有以下3个满足KB：
1. **模型3**：P₁,₂ = False, P₂,₂ = True, P₃,₁ = False
2. **模型4**：P₁,₂ = False, P₂,₂ = False, P₃,₁ = True
3. **模型7**：P₁,₂ = False, P₂,₂ = True, P₃,₁ = True
这3个模型用**实线圈**表示，是KB的“真相集合”。

![[7-5.png]]
(b)的情况是表示，如果[2,2]是没坑的，那么一共有4种可能的分布情况，用虚线表示。
可以发现是和KB有一个重合的情况，也就代表着，如果[2,2]没坑的化，那么只有[3,1]是有坑的了
- **命题α₂ = ¬P₂,₂**：假设[2,2]没有坑（P₂,₂ = False）。
- **虚线圈**：表示满足α₂的模型，即P₂,₂ = False 的所有情况。在8个模型中，有4个满足：
    1. P₁,₂ = False, P₂,₂ = False, P₃,₁ = False（模型1）
    2. P₁,₂ = False, P₂,₂ = False, P₃,₁ = True（模型4）
    3. P₁,₂ = True, P₂,₂ = False, P₃,₁ = False（模型2）
    4. P₁,₂ = True, P₂,₂ = False, P₃,₁ = True（模型6）
- **与KB的关系**：KB为真的3个模型是模型3、4、7：
    - 模型3：P₂,₂ = True，不在虚线圈内。
    - 模型4：P₂,₂ = False，在虚线圈内。
    - 模型7：P₂,₂ = True，不在虚线圈内。
    - **重合情况**：虚线圈（4个模型）与实线圈（3个模型）只有一个交集，即模型4。
- **进一步推导**：在模型4中，P₁,₂ = False, P₂,₂ = False, P₃,₁ = True，说明如果[2,2]没坑（P₂,₂ = False），且满足KB（B₂,₁要求[2,2]或[3,1]有坑），则[3,1]必须有坑（P₃,₁ = True）。
- **结论**：虚线圈未完全包含实线圈，说明存在KB为真的模型（模型3和7）使¬P₂,₂为假。因此，**KB 不蕴含 ¬P₂,₂**（无法确定[2,2]是否有坑）。
## 7.3.3 逻辑蕴含（Entailment）：从A推出B

逻辑推理的核心是“蕴含”，用符号“⊨”表示。意思是：如果A是真的，B也必须是真的。数学上说：A的每个真模型里，B也得真。
- **例子**：算术里“x=0”蕴含“xy=0”。因为x=0时，不管y是啥，xy总是0。
- **Wumpus世界（图7-5）**
    - 知识库（KB）：[1,1]没微风，[2,1]有微风。
    - 查询：α₁=“[1,2]没坑”，α₂=“[2,2]没坑”。
    ![[7-5.png]]
    - 图7-5a：KB为真的3个模型（实线圈），α₁全真，所以KB ⊨ α₁（[1,2]没坑）。
    - 图7-5b：α₂在有些模型真，有些假，所以KB不蕴含α₂（[2,2]不确定）。
## 7.3.4 模型检验：怎么找答案？

推理的方法叫“模型检验”：**列出所有模型（枚举法）**，检查KB为真的情况里，α是不是都真。
- **过程**：图7-5列了8个模型（2³，因为3个格子），KB为真只有3个，再看α在这3个里咋样。
- **例子**：像查“干草堆”里的“针”。KB是草堆，α是针，模型检验是翻遍草堆找针。
## 7.3.5 可靠性和完备性

- **可靠性（Soundness）**：推理只推出真的东西，不瞎编。比如模型检验不会说“天上有龙”。
- **完备性（Completeness）**：能推出所有真的东西，不漏掉。模型检验在有限模型里是完备的。
- **结论**：Wumpus世界里，模型检验靠谱（不乱猜），也完备（能找到所有结论）。
## 7.3.6 真实世界和落地

逻辑推理在智能体脑子里跑（语法操作），但对应真实世界（语义）。图7-6说：旧知识（旧结构）推新知识（新结构），保证新东西在现实里也成立。
![[7-6 语句是智能体的物理结构.png]]
- **例子**：智能体闻到臭味，记下“有臭味”，推出“附近有Wumpus”，这在真实迷宫里是对的。
**落地**
KB咋知道是真的？靠传感器（比如闻臭味）和学习（比如“臭味=Wumpus附近”）。但学习可能出错，比如Wumpus某天不臭。
- **例子**：你教智能体“下雨=带伞”，但某天下雨不冷，它可能多带了伞。
# 7.4 命题逻辑：一种非常简单的逻辑

命题逻辑是一种简单但强大的逻辑系统，用于表示知识并进行推理。它通过明确的规则（语法）和含义（语义），帮助智能体从已知事实推导出新的结论。下面我们逐一探讨其核心部分。

## 7.4.1 语法（Syntax)
语法定义了命题逻辑语句的构造规则，类似于语言中的“造句规则”。它告诉我们如何用符号和联结词写出合法的语句。图7-7用BNF文法（一种形式化的语法描述方法）展示了这些规则，但我们可以用更直白的方式理解。
![[7-7 命题逻辑中语句的BNF文法以及从高到低排列的运算符优先级.png]]
#### 语句的组成
命题逻辑的语句分为两类：
- **原子语句**：最基本的单位，例如：
    - “True”（永远为真）
    - “False”（永远为假）
    - 命题符号，如“P”（可以表示具体事实，例如“[1,2]有坑”）
- **复合语句**：通过逻辑联结词将原子语句组合起来。常见的联结词包括：
    - **¬（非）**：表示否定，例如“¬P”表示“[1,2]没有坑”。
    - **∧（与）**：表示“并且”，例如“P ∧ Q”表示“[1,2]有坑并且有臭味”。
    - **∨（或）**：表示“或者”，例如“P ∨ Q”表示“[1,2]有坑或者有臭味”。
    - **⇒（蕴涵）**：表示“如果…则…”，例如“P ⇒ Q”表示“如果[1,2]有坑，则有微风”。
    - **⇔（双向蕴涵）**：表示“当且仅当”，例如“P ⇔ Q”表示“[1,2]有坑当且仅当有微风”。
#### 优先级规则

逻辑联结词有优先级，类似于数学中的运算符优先级：

- **¬** 的优先级最高，然后依次是 **∧**、**∨**、**⇒** 和 **⇔**。
    
- 您可以用括号改变优先级。例如：
    
    - “¬P ∧ Q” 表示“[1,2]没有坑并且有臭味”。
        
    - “¬(P ∧ Q)” 表示“并非([1,2]有坑并且有臭味)”。
        

#### 例子

- **合法语句**：¬P ∧ Q（没有坑且有臭味）
- **非法语句**：P ∧（缺少另一部分，无法构成完整语句）
#### 初学者理解

语法就像搭积木：原子语句是小积木块，联结词是连接工具，按照规则搭出复杂的结构。